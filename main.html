<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>æ‡·èˆŠç«¥å¹´å¡é€šæ·˜æ±°è³½</title>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
  body {
    background: #111;
    color: #fff;
    text-align: center;
    font-family: sans-serif;
  }

  #match {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-top: 40px;
  }

  .card {
    width: 260px;
    cursor: pointer;
    transition: all .4s ease;
  }

  .winner {
    transform: scale(1.15);
    box-shadow: 0 0 30px gold;
  }

  .loser {
    filter: grayscale(100%);
    opacity: .4;
    transform: scale(.9);
  }

  .disabled {
    pointer-events: none;
  }

  #result img {
    width: 320px;
    margin-top: 20px;
  }
</style>
</head>

<body>

<h1 id="roundTitle">é–‹å§‹é¸æ“‡</h1>

<div id="match">
  <img id="img1" class="card">
  <img id="img2" class="card">
</div>

<div id="result"></div>

<script>
/* ===== 46 å¼µåœ–ç‰‡ ===== */
let cartoons = [
  { id: 1, name: "é£›å¤©å°å¥³è­¦", img: "1.jpg" },
  // ...
  // ä¸€ç›´åˆ° 46
];

/* ===== ç‹€æ…‹ ===== */
let pair = [];

/* ===== å·¥å…· ===== */
function randomPick() {
  return cartoons[Math.floor(Math.random() * cartoons.length)];
}

/* ===== é–‹å§‹ ===== */
function start() {
  nextPair();
}

/* ===== ç”¢ç”Ÿä¸‹ä¸€çµ„ ===== */
function nextPair() {
  if (cartoons.length === 1) {
    showWinner(cartoons[0]);
    return;
  }

  let a = randomPick();
  let b;
  do {
    b = randomPick();
  } while (a.id === b.id);

  pair = [a, b];
  render();
}

/* ===== é¡¯ç¤º ===== */
function render() {
  reset();
  img1.src = pair[0].img;
  img2.src = pair[1].img;

  if (cartoons.length === 16) roundTitle.innerText = "16 å¼·";
  else if (cartoons.length === 4) roundTitle.innerText = "4 å¼·";
  else roundTitle.innerText = `å‰©ä¸‹ ${cartoons.length} å¼µ`;
}

/* ===== ä½¿ç”¨è€…é¸æ“‡ ===== */
function choose(index) {
  const winner = pair[index];
  const loser = pair[1 - index];

  const cards = document.querySelectorAll(".card");
  cards.forEach(c => c.classList.add("disabled"));

  cards[index].classList.add("winner");
  cards[1 - index].classList.add("loser");

  setTimeout(() => {
    cartoons = cartoons.filter(c => c.id !== loser.id);
    nextPair();
  }, 700);
}

img1.onclick = () => choose(0);
img2.onclick = () => choose(1);

/* ===== é‡ç½® ===== */
function reset() {
  document.querySelectorAll(".card").forEach(c => {
    c.className = "card";
  });
}

/* ===== å† è» ===== */
function showWinner(winner) {
  match.style.display = "none";
  result.innerHTML = `
    <h1>ğŸ† ç¬¬ä¸€åèª•ç”Ÿï¼</h1>
    <img src="${winner.img}">
    <h2>${winner.name}</h2>
  `;

  confetti({
    particleCount: 250,
    spread: 120,
    origin: { y: 0.6 }
  });
}

start();
</script>

</body>
</html>
